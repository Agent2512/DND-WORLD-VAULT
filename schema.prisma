generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id                    Int                     @id @default(autoincrement())
  username              String
  UserToBox             UserToBox[]
  UserCategoryToProduct UserCategoryToProduct[]
}

model Box {
  id            Int             @id @default(autoincrement())
  name          String
  BoxToCategory BoxToCategory[]
  UserToBox     UserToBox[]
}

model Category {
  id                    Int                     @id @default(autoincrement())
  name                  String
  BoxToCategory         BoxToCategory[]
  UserCategoryToProduct UserCategoryToProduct[]
  CategoryToProduct     CategoryToProduct[]
}

model Product {
  id                      Int                     @id @default(autoincrement())
  name                    String
  productNum              Int
  image                   String
  ProductBlacklist        ProductBlacklist[]      @relation("ProductBlacklist")
  RemovedProductBlacklist ProductBlacklist[]      @relation("RemovedProduct")
  UserCategoryToProduct   UserCategoryToProduct[]
  CategoryToProduct       CategoryToProduct[]
}

model ProductBlacklist {
  productid        Int
  removedProductId Int

  product        Product @relation("ProductBlacklist", fields: [productid], references: [id])
  removedProduct Product @relation("RemovedProduct", fields: [removedProductId], references: [id])

  @@id([productid, removedProductId])
}

model BoxToCategory {
  boxId      Int
  categoryId Int
  Box        Box      @relation(fields: [boxId], references: [id])
  Category   Category @relation(fields: [categoryId], references: [id])

  @@id([boxId, categoryId])
}

model UserToBox {
  userId Int
  boxId  Int
  User   User @relation(fields: [userId], references: [id])
  Box    Box  @relation(fields: [boxId], references: [id])

  @@id([userId, boxId])
}

model UserCategoryToProduct {
  userId     Int
  categoryId Int
  productId  Int
  User       User     @relation(fields: [userId], references: [id])
  Category   Category @relation(fields: [categoryId], references: [id])
  Product    Product  @relation(fields: [productId], references: [id])

  @@id([userId, categoryId, productId])
}

model CategoryToProduct {
  categoryId Int
  productId  Int
  Category   Category @relation(fields: [categoryId], references: [id])
  Product    Product  @relation(fields: [productId], references: [id])

  @@id([categoryId, productId])
}
